<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ชำระเงิน | XtraSmooth</title>
    <link rel="stylesheet" href="assets/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&display=swap" rel="stylesheet">
    <meta name="robots" content="noindex">
</head>
<body>
    <nav class="navbar">
        <div class="container"><a href="/" class="logo">xtrasmooth</a></div>
    </nav>

    <main class="container">
        <form id="checkout-form" class="checkout-grid">
            <div class="form-section card">
                <h2>1. ข้อมูลจัดส่ง</h2>
                <div class="form-group">
                    <label>ชื่อ-นามสกุล *</label>
                    <input type="text" name="name" required placeholder="ระบุชื่อผู้รับ">
                </div>
                <div class="form-group">
                    <label>เบอร์โทรศัพท์ *</label>
                    <input type="tel" name="phone" required pattern="[0-9]{9,10}" placeholder="08xxxxxxxx">
                </div>
                <div class="form-group">
                    <label>ที่อยู่จัดส่ง *</label>
                    <textarea name="address" rows="4" required placeholder="บ้านเลขที่, ถนน, ตำบล, อำเภอ, จังหวัด, รหัสไปรษณีย์"></textarea>
                </div>
                <div class="form-group">
                    <label>หมายเหตุ (ถ้ามี)</label>
                    <textarea name="note" rows="2" placeholder="เช่น ฝากไว้ที่ป้อมยาม, โทรแจ้งก่อนส่ง"></textarea>
                </div>
            </div>

            <div class="order-section">
                <div class="card">
                    <h2>2. สรุปรายการ</h2>
                    <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                        <span>XtraSmooth (1 ลิตร) x <span id="checkout-qty">1</span></span>
                        <span>฿<span id="checkout-total">599</span></span>
                    </div>
                    <div style="display:flex; justify-content:space-between; color: var(--success); font-weight:bold;">
                        <span>ค่าจัดส่ง</span>
                        <span>ฟรีทั่วประเทศ</span>
                    </div>
                    <hr style="margin: 20px 0; border: 0; border-top: 1px solid var(--border);">
                    
                    <h3>3. วิธีชำระเงิน</h3>
                    <div class="payment-methods">
                        <label class="payment-item">
                            <input type="radio" name="payment" value="stripe" checked onchange="handlePaymentChange()">
                            <span>ชำระผ่านบัตร/Stripe</span>
                        </label>
                        <label class="payment-item">
                            <input type="radio" name="payment" value="transfer" onchange="handlePaymentChange()">
                            <span>โอนเงิน/แนบสลิป</span>
                        </label>
                        <label class="payment-item">
                            <input type="radio" name="payment" value="cod" onchange="handlePaymentChange()">
                            <span>เก็บเงินปลายทาง (COD)</span>
                        </label>
                        <label class="payment-item">
                            <input type="radio" name="payment" value="usdt" onchange="handlePaymentChange()">
                            <span>USDT (ติดต่อทาง LINE)</span>
                        </label>
                    </div>

                    <div id="stripe-container" style="margin-top:20px;">
                        <script async src="https://js.stripe.com/v3/buy-button.js"></script>
                        <stripe-buy-button
                          buy-button-id="buy_btn_1Slr45RYemzYbSCnJiheqSUZ"
                          publishable-key="pk_live_51SLRGKRYemzYbSCnXbMgb5fB2We1F2QOEU0JXXhHGVZukGaibYCZN60XPgzncyD7O8iacm6qVursheVoCmgStLg600Q3wWtNwr"
                        ></stripe-buy-button>
                    </div>

                    <div id="slip-container" style="display:none; margin-top:15px; background:#f8fafc; padding:15px; border-radius:8px;">
                        <p style="margin-top:0; font-size:14px;"><b>บัญชีรับเงิน:</b> กสิกรไทย<br>000-0-00000-0 (บจก. เอ็กซ์ตร้าสมูท)</p>
                        <label>รูปภาพสลิป</label>
                        <input type="file" name="slip" accept="image/*" style="margin-top:5px;">
                    </div>

                    <button type="submit" class="btn-primary full-width" style="margin-top:25px;">ยืนยันคำสั่งซื้อ</button>
                    <p style="font-size:12px; color:var(--gray); text-align:center; margin-top:10px;">ข้อมูลของคุณจะถูกเก็บเป็นความลับและใช้เพื่อการจัดส่งเท่านั้น</p>
                </div>
            </div>
        </form>
    </main>
    <script src="assets/app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js').catch(err => console.error(err));
            });
        }
    </script>
</body>
</html>